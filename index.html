<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainable Weight Loss Without Diet Stress</title>
    <meta name="description" content="Discover how to lose weight without giving up your favorite foods. Join our free call to create a personalized weight loss plan.">
    <meta name="robots" content="index, follow">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary: #0095F6;
            --primary-dark: #0081D6;
            --background: #0F172A;
            --text: #F8FAFC;
            --text-light: #94A3B8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.5;
            font-size: 16px;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .content {
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            max-width: 800px;
            padding: 0 1.25rem 2rem;
        }

        .callout {
            background: var(--primary);
            color: var(--text);
            padding: 0.625rem;
            font-weight: 700;
            font-size: 1rem;
            text-transform: none;
            width: 100%;
            text-align: center;
            margin-bottom: 1rem;
            letter-spacing: 0.02em;
        }

        .headline {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.2;
            color: var(--text);
            margin: 0.5rem 0 0;
            max-width: 800px;
            letter-spacing: -0.01em;
        }

        .subheadline {
            font-size: 1.125rem;
            color: var(--text);
            line-height: 1.5;
            max-width: 650px;
            margin: 0 auto;
        }

        .video-section {
            width: 100%;
            margin: 0.5rem 0;
        }

        .video-instruction {
            background: var(--primary);
            color: var(--text);
            padding: 0.625rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-weight: 600;
            font-size: 0.9375rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .video-instruction i {
            font-size: 1.125rem;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: var(--background);
            margin: 0 auto;
            max-width: 800px;
        }

        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .video-thumbnail .play-icon {
            position: absolute;
            font-size: 2.5rem;
            color: #000000;
            opacity: 0.9;
            transition: all 0.3s ease;
            background: #FFFFFF;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .video-thumbnail .play-icon i {
            margin-left: 5px;
        }

        .video-thumbnail:hover .play-icon {
            opacity: 1;
            transform: scale(1.05);
        }

        .hidden {
            display: none !important;
        }

        .section-divider {
            border-top: 1px solid rgba(148, 163, 184, 0.2);
            margin: 0.5rem 0;
            width: 100%;
        }

        .scheduler-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: #FFFFFF;
            border-radius: 4px;
            padding: 1rem;
            color: #1E293B;
        }

        /* CTA Button above the fold */
        .cta-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 2rem;
            background: linear-gradient(to bottom, #EF4444, #DC2626);
            color: white;
            border: 1px solid #B91C1C;
            border-radius: 4px;
            font-size: 1.125rem;
            font-weight: 700;
            margin: 0.5rem auto;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .cta-button:hover {
            background: linear-gradient(to bottom, #DC2626, #B91C1C);
            transform: translateY(-1px);
        }

        .cta-button i {
            font-size: 1rem;
        }

        .legal {
            margin-top: 2.5rem;
            padding: 1.25rem 0 0;
            border-top: 1px solid rgba(148, 163, 184, 0.2);
            font-size: 0.75rem;
            color: var(--text-light);
            text-align: center;
            max-width: 800px;
            margin: 2.5rem auto 0;
            line-height: 1.6;
        }

        .legal p {
            margin-bottom: 0.5rem;
        }

        .legal a {
            color: var(--text-light);
            text-decoration: none;
            padding: 0.25rem;
        }

        .legal a:hover {
            text-decoration: underline;
        }

        .next-steps-header {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .highlight {
            text-decoration: underline;
            text-decoration-color: #0095F6;
            text-decoration-thickness: 2px;
            text-underline-offset: 4px;
        }

        em {
            font-style: italic;
            font-weight: inherit;
        }

        /* Calendar Styles */
        .calendar-container {
            width: 100%;
            max-width: 800px;
            margin: 0.5rem auto;
            background: #FFFFFF;
            border-radius: 4px;
            border: 1px solid #CBD5E1;
            color: #1E293B;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .calendar-instruction {
            display: block;
            text-align: center;
            background: linear-gradient(to bottom, #EF4444, #DC2626);
            color: white;
            font-weight: 700;
            padding: 0.875rem;
            margin: -1.5rem -1.5rem 1.5rem -1.5rem;
            border-radius: 4px 4px 0 0;
            font-size: 1.125rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid #B91C1C;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            width: 100%;
        }

        .month-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #1E293B;
            width: 100%;
            justify-content: space-between;
        }

        .month-title {
            font-size: 1.125rem;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            flex: 1;
            text-align: center;
            color: #1E293B;
        }

        .date-display {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1E293B;
        }

        .nav-button {
            background: #E2E8F0;
            border: 1px solid #CBD5E1;
            color: #1E293B;
            width: 36px;
            height: 36px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }

        .nav-button:hover {
            background: #CBD5E1;
        }

        .nav-button i {
            font-size: 1rem;
            color: #1E293B;
        }

        .nav-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #F1F5F9;
        }

        .time-slots-container {
            display: block;
            margin-top: 1.5rem;
            color: #1E293B;
        }

        .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        .time-slot {
            padding: 0.75rem;
            background: #FFFFFF;
            border: 1px solid var(--primary);
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--primary);
            font-weight: 600;
        }

        .time-slot:hover {
            background: #F1F5F9;
            border-color: var(--primary-dark);
        }

        .time-slot.active {
            background: var(--primary);
            color: #FFFFFF;
        }

        .time-slot.taken {
            background: #E2E8F0;
            border-color: #CBD5E1;
            color: #94A3B8;
            cursor: not-allowed;
            position: relative;
            text-decoration: line-through;
        }

        .time-slot.taken::after {
            content: "Taken";
            position: absolute;
            font-size: 0.6rem;
            bottom: 2px;
            right: 4px;
            color: #64748B;
        }

        .time-slot.taken:hover {
            background: #E2E8F0;
            border-color: #CBD5E1;
        }

        .timezone-select {
            margin-bottom: 1rem;
            width: 100%;
        }

        .timezone-select select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid #CBD5E1;
            border-radius: 4px;
            background-color: #FFFFFF;
            color: #1E293B;
            font-size: 0.875rem;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748B' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 0.85rem;
            padding-right: 2rem;
            cursor: pointer;
        }

        .timezone-select select:focus {
            outline: none;
            border-color: var(--primary);
        }

        @media (min-width: 769px) {
            .content {
                padding-top: 0.5rem;
            }
        }

        @media (max-width: 768px) {
            body {
                font-size: 15px;
            }

            .callout {
                font-size: 0.9375rem;
            }

            .content {
                gap: 1rem;
                padding: 0 1rem 1.5rem;
            }

            .headline {
                font-size: 1.625rem;
                margin-bottom: 0.25rem;
            }

            .subheadline {
                font-size: 1rem;
            }

            .video-container {
                padding-bottom: 56.25%;
                max-height: 250px;
            }

            .cta-button {
                width: 100%;
                padding: 0.75rem 1.5rem;
            }

            .scheduler-container {
                padding: 1rem;
            }

            .time-slots-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .legal {
                margin-top: 2rem;
                padding-top: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="callout">For People Committed to Losing 25+ Pounds</div>
        <div class="content">
            <h1 class="headline">Congratulations! Your <span class="highlight">Next Step</span> is to Book Your Call</h1>
            <p class="subheadline">Select a time below to speak with Asher and create your personalized transformation plan.</p>

            <div class="video-section">

                <div class="video-container">
                    <video id="main-video" preload="metadata" playsinline>
                        <source src="video1.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div id="video-thumbnail" class="video-thumbnail">
                        <video id="thumbnail-video" autoplay muted loop playsinline>
                            <source src="video1.mp4#t=0,5" type="video/mp4">
                        </video>
                        <div class="play-icon">
                            <i class="fas fa-play"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div style="position: relative; width: 100%; max-width: 800px; margin: 0 auto;">
                <div style="position: relative; background: #DC2626; color: white; font-weight: 600; padding: 0.625rem 0.625rem 1.5rem; border-radius: 4px 4px 0 0; font-size: 0.9375rem; text-align: center; display: flex; align-items: center; justify-content: center; gap: 0.75rem; border: 1px solid #B91C1C; border-bottom: none;">
                    Select a Time Below
                </div>
                <div id="calendar-container" class="calendar-container" style="position: relative; z-index: 2; margin-top: -1rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); border: 1px solid #CBD5E1; border-radius: 4px; background: #FFFFFF;">
                    <!-- Cal inline embed code begins -->
                    <div style="width:100%;height:100%;overflow:scroll" id="my-cal-inline"></div>
                    <script type="text/javascript">
                        (function(C, A, L) {
                            let p = function(a, ar) {
                                a.q.push(ar);
                            };
                            let d = C.document;
                            C.Cal = C.Cal || function() {
                                let cal = C.Cal;
                                let ar = arguments;
                                if (!cal.loaded) {
                                    cal.ns = {};
                                    cal.q = cal.q || [];
                                    d.head.appendChild(d.createElement("script")).src = A;
                                    cal.loaded = true;
                                }
                                if (ar[0] === L) {
                                    const api = function() {
                                        p(api, arguments);
                                    };
                                    const namespace = ar[1];
                                    api.q = api.q || [];
                                    if (typeof namespace === "string") {
                                        cal.ns[namespace] = cal.ns[namespace] || api;
                                        p(cal.ns[namespace], ar);
                                        p(cal, ["initNamespace", namespace]);
                                    } else p(cal, ar);
                                    return;
                                }
                                p(cal, ar);
                            };
                        })(window, "https://app.cal.com/embed/embed.js", "init");
                        Cal("init", "30min", {
                            origin: "https://cal.com"
                        });

                        Cal.ns["30min"]("inline", {
                            elementOrSelector: "#my-cal-inline",
                            config: {
                                "layout": "month_view",
                                "theme": "light"
                            },
                            calLink: "busy-barbell/30min",
                        });

                        Cal.ns["30min"]("ui", {
                            "theme": "light",
                            "cssVarsPerTheme": {
                                "light": {
                                    "cal-brand": "#DC2626"
                                },
                                "dark": {
                                    "cal-brand": "#DC2626"
                                }
                            },
                            "hideEventTypeDetails": true,
                            "layout": "month_view"
                        });
                    </script>
                    <!-- Cal inline embed code ends -->
                </div>
            </div>

            <div class="legal">
                <p>This site is not a part of the Facebook website or Facebook Inc. Additionally, this site is NOT endorsed by Facebook in any way. FACEBOOK is a trademark of FACEBOOK, Inc.</p>
                <p>Individual results may vary. The testimonials and examples used are exceptional results, which do not apply to the average purchaser, and are not intended to represent or guarantee that anyone will achieve the same or similar results.</p>
                <p>This site may contain information about products, services, or other materials that may be offered by third parties. We do not endorse or guarantee the accuracy of any information offered by these third parties.</p>
                <p>© 2024 All Rights Reserved</p>
                <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a> | <a href="#">Disclaimer</a></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Video thumbnail and play functionality
            const mainVideo = document.getElementById('main-video');
            const thumbnailContainer = document.getElementById('video-thumbnail');
            const thumbnailVideo = document.getElementById('thumbnail-video');

            // Fix for mobile: ensure thumbnail video loads and plays
            function initThumbnail() {
                // Reset video source with cache-busting parameter
                const currentSrc = thumbnailVideo.querySelector('source').src;
                const newSrc = currentSrc.split('#')[0] + '#t=0,5?' + new Date().getTime();
                thumbnailVideo.querySelector('source').src = newSrc;

                // Force load and play
                thumbnailVideo.load();
                thumbnailVideo.play().catch(e => {
                    console.log('Auto-play prevented, using fallback');
                    // If autoplay fails, use a static thumbnail instead
                    thumbnailContainer.style.backgroundImage = 'url("https://i.postimg.cc/W3ssCwhw/anycript-thumbnail-1.webp")';
                    thumbnailContainer.style.backgroundSize = 'cover';
                    thumbnailContainer.style.backgroundPosition = 'center';
                });
            }

            // Initialize thumbnail
            initThumbnail();

            // When thumbnail is clicked, hide thumbnail and play main video
            thumbnailContainer.addEventListener('click', function() {
                thumbnailContainer.classList.add('hidden');
                mainVideo.controls = true;
                mainVideo.play().catch(e => {
                    console.log('Error playing main video:', e);
                });
            });

            // If main video ends, show thumbnail again
            mainVideo.addEventListener('ended', function() {
                thumbnailContainer.classList.remove('hidden');
                mainVideo.controls = false;
                initThumbnail();
            });

            // Detect user's timezone
            const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const userTimeZoneAbbr = getUserTimeZoneAbbreviation(userTimeZone);

            // Function to get timezone abbreviation
            function getUserTimeZoneAbbreviation(timeZone) {
                try {
                    const options = {
                        timeZoneName: 'short'
                    };
                    const timeZoneAbbr = new Intl.DateTimeFormat('en-US', options)
                        .formatToParts(new Date())
                        .find(part => part.type === 'timeZoneName').value;
                    return timeZoneAbbr;
                } catch (e) {
                    const offset = new Date().getTimezoneOffset();
                    const hours = Math.abs(Math.floor(offset / 60));
                    const minutes = Math.abs(offset % 60);
                    const sign = offset < 0 ? '+' : '-';
                    return `GMT${sign}${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                }
            }

            // Set up today and tomorrow dates
            const today = new Date();
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);

            let selectedDate = today;

            // Format date for display
            function formatDateDisplay(date) {
                const options = {
                    weekday: 'long',
                    month: 'long',
                    day: 'numeric'
                };
                return date.toLocaleDateString('en-US', options);
            }

            // Update the date display
            function updateDateDisplay() {
                document.getElementById('current-date').textContent = formatDateDisplay(selectedDate);

                // Update navigation buttons
                const prevButton = document.getElementById('prev-day');
                const nextButton = document.getElementById('next-day');

                // Disable previous button if we're on today
                const now = new Date();
                if (selectedDate.getDate() === now.getDate() &&
                    selectedDate.getMonth() === now.getMonth() &&
                    selectedDate.getFullYear() === now.getFullYear()) {
                    prevButton.classList.add('disabled');
                    prevButton.disabled = true;
                } else {
                    prevButton.classList.remove('disabled');
                    prevButton.disabled = false;
                }

                // Disable next button if we're on tomorrow
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                if (selectedDate.getDate() === tomorrow.getDate() &&
                    selectedDate.getMonth() === tomorrow.getMonth() &&
                    selectedDate.getFullYear() === tomorrow.getFullYear()) {
                    nextButton.classList.add('disabled');
                    nextButton.disabled = true;
                } else {
                    nextButton.classList.remove('disabled');
                    nextButton.disabled = false;
                }

                // Show time slots for the selected date
                showTimeSlots(selectedDate);
            }

            // Add click handlers for navigation buttons
            document.getElementById('prev-day').addEventListener('click', function() {
                if (!this.disabled) {
                    selectedDate = new Date(selectedDate);
                    selectedDate.setDate(selectedDate.getDate() - 1);
                    updateDateDisplay();
                }
            });

            document.getElementById('next-day').addEventListener('click', function() {
                if (!this.disabled) {
                    selectedDate = new Date(selectedDate);
                    selectedDate.setDate(selectedDate.getDate() + 1);
                    updateDateDisplay();
                }
            });

            // Initialize with today's date
            updateDateDisplay();

            // Function to show time slots for a selected date
            function showTimeSlots(date) {
                const timeSlotGrid = document.getElementById('time-slots-grid');
                timeSlotGrid.innerHTML = '';

                // Generate time slots
                const timeSlots = generateTimeSlots(date);

                // Determine some slots to be marked as taken (for scarcity effect)
                const totalSlots = timeSlots.length;
                const numberOfTakenSlots = Math.floor(totalSlots * 0.4); // Mark about 40% as taken
                const takenSlotIndices = new Set();

                // Generate random indices for taken slots
                while (takenSlotIndices.size < numberOfTakenSlots) {
                    const randomIndex = Math.floor(Math.random() * totalSlots);
                    takenSlotIndices.add(randomIndex);
                }

                timeSlots.forEach((slot, index) => {
                    const timeElement = document.createElement('div');
                    timeElement.className = 'time-slot';
                    timeElement.textContent = slot;

                    // Mark some slots as taken to create scarcity
                    if (takenSlotIndices.has(index)) {
                        timeElement.classList.add('taken');
                    } else {
                        timeElement.addEventListener('click', function() {
                            // Store the selected time and date in localStorage
                            const fullDateOptions = {
                                weekday: 'long',
                                month: 'long',
                                day: 'numeric',
                                year: 'numeric'
                            };
                            const formattedDate = date.toLocaleDateString('en-US', fullDateOptions);

                            localStorage.setItem('appointmentDate', formattedDate);
                            localStorage.setItem('appointmentTime', `${slot} (30 minutes)`);
                            localStorage.setItem('appointmentTimeZone', userTimeZone);
                            localStorage.setItem('appointmentTimeZoneAbbr', userTimeZoneAbbr);

                            // Get user data from URL parameters or localStorage
                            const urlParams = new URLSearchParams(window.location.search);
                            const firstName = urlParams.get('firstName') || localStorage.getItem('firstName') || '';
                            const lastName = urlParams.get('lastName') || localStorage.getItem('lastName') || '';
                            const email = urlParams.get('email') || localStorage.getItem('email') || '';
                            const phone = urlParams.get('phone') || localStorage.getItem('phone') || '';

                            // Submit booking data to server
                            fetch('process-booking.php', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({
                                        date: formattedDate,
                                        time: slot,
                                        timezone: userTimeZone,
                                        timezoneAbbr: userTimeZoneAbbr,
                                        firstName: firstName,
                                        lastName: lastName,
                                        email: email,
                                        phone: phone
                                    })
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        // Redirect to thank-you page
                                        window.location.href = 'thank-you.php';
                                    } else {
                                        alert('Booking failed: ' + data.message);
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    // Fallback to original behavior if fetch fails
                                    window.location.href = 'thank-you.php';
                                });
                        });
                    }

                    timeSlotGrid.appendChild(timeElement);
                });
            }

            // Function to generate time slots
            function generateTimeSlots(date) {
                const slots = [];
                const userTimezoneOffset = new Date().getTimezoneOffset();

                // Eastern Time offset (in minutes)
                const now = new Date();
                const jan = new Date(now.getFullYear(), 0, 1);
                const jul = new Date(now.getFullYear(), 6, 1);
                const isDST = now.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());
                const easternOffset = isDST ? 240 : 300;

                const timezoneDiff = userTimezoneOffset - easternOffset;
                let startHour = 14 - (timezoneDiff / 60);
                let endHour = 20 - (timezoneDiff / 60);

                for (let hour = Math.floor(startHour); hour <= Math.ceil(endHour); hour++) {
                    for (let minute = 0; minute < 60; minute += 15) {
                        const localTime = hour + (minute / 60);
                        if (localTime < startHour) continue;
                        if (localTime > endHour) continue;

                        let displayHour = hour;
                        let period = 'AM';

                        if (displayHour >= 12) {
                            period = 'PM';
                            if (displayHour > 12) {
                                displayHour -= 12;
                            }
                        }
                        if (displayHour === 0) {
                            displayHour = 12;
                        }

                        const minuteStr = minute === 0 ? '00' : minute.toString();
                        const slot = `${displayHour}:${minuteStr} ${period}`;
                        slots.push(slot);
                    }
                }

                // Filter out past time slots if the selected date is today
                const now2 = new Date();
                if (date.getDate() === now2.getDate() &&
                    date.getMonth() === now2.getMonth() &&
                    date.getFullYear() === now2.getFullYear()) {

                    return slots.filter(slot => {
                        const [time, period] = slot.split(' ');
                        let [hours, minutes] = time.split(':');
                        hours = parseInt(hours);
                        minutes = parseInt(minutes);

                        if (period === 'PM' && hours < 12) {
                            hours += 12;
                        } else if (period === 'AM' && hours === 12) {
                            hours = 0;
                        }

                        const slotTime = new Date();
                        slotTime.setHours(hours, minutes, 0, 0);

                        const bufferTime = new Date();
                        bufferTime.setMinutes(bufferTime.getMinutes() + 30);

                        return slotTime > bufferTime;
                    });
                }

                return slots;
            }

            // Populate timezone dropdown
            function populateTimezoneDropdown() {
                const timezoneSelector = document.getElementById('timezone-selector');
                const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                // Common timezones with standard names and abbreviations
                const timezones = [{
                        zone: 'America/New_York',
                        name: 'Eastern Time',
                        abbr: 'EST'
                    },
                    {
                        zone: 'America/Chicago',
                        name: 'Central Time',
                        abbr: 'CST'
                    },
                    {
                        zone: 'America/Denver',
                        name: 'Mountain Time',
                        abbr: 'MST'
                    },
                    {
                        zone: 'America/Los_Angeles',
                        name: 'Pacific Time',
                        abbr: 'PST'
                    },
                    {
                        zone: 'America/Phoenix',
                        name: 'Mountain Time - AZ',
                        abbr: 'MST'
                    },
                    {
                        zone: 'America/Anchorage',
                        name: 'Alaska Time',
                        abbr: 'AKST'
                    },
                    {
                        zone: 'Pacific/Honolulu',
                        name: 'Hawaii Time',
                        abbr: 'HST'
                    },
                    {
                        zone: 'Europe/London',
                        name: 'UK Time',
                        abbr: 'GMT'
                    },
                    {
                        zone: 'Europe/Paris',
                        name: 'Central European Time',
                        abbr: 'CET'
                    },
                    {
                        zone: 'Australia/Sydney',
                        name: 'Australian Eastern Time',
                        abbr: 'AEST'
                    },
                    {
                        zone: 'Asia/Tokyo',
                        name: 'Japan Time',
                        abbr: 'JST'
                    }
                ];

                timezones.forEach(({
                    zone,
                    name,
                    abbr
                }) => {
                    const option = document.createElement('option');
                    option.value = zone;
                    option.text = `${name} (${abbr})`;

                    if (zone === userTimeZone) {
                        option.selected = true;
                    }
                    timezoneSelector.appendChild(option);
                });

                // Add event listener for timezone changes
                timezoneSelector.addEventListener('change', function() {
                    showTimeSlots(selectedDate);
                });
            }

            // Initialize timezone dropdown
            populateTimezoneDropdown();
        });
    </script>
</body>

</html>
